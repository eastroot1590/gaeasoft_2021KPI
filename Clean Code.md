# Clean Code

이 문서는 *Robert. C. Martin*의 책 **Clean Code**를 읽고 정리하는 문서로 책에서 제시하는 좋은 코드를 작성하기 위해 책에서 제시하는 아이디어를 요약합니다. 요약을 위해서 짧은 문장과 **규칙**이라는 목록으로 아이디어를 나열하지만 실제 책에서는 절대 그 어떤 아이디어에 대해서, 이 방법만이 정답이고 다른 방법으로 작성하는 것은 틀렸다고 하지 않습니다.

## 깨끗한 코드

깨끗한 코드는 잘 쓴 하나의 문장처럼 읽을 수 있어야 한다. 즉, 코드를 읽으면서 짐작했던 기능을 그대로 수행해야 한다.

규칙:

- 중복을 피하라
- 한 기능만 수행하라
- 제대로 표현하라
- 작게 추상화하라

위 아이디어를 지키면서 **주의 깊게** 코드를 작성할 수 있어야 한다.

불가피하게 모듈에 기능을 추가하거나 수정을 해야 한다면 수정하기 전보다 더 깨끗하게 만들어 놓고 다음 작업으로 넘어가도록 한다.

## 의미있는 이름

의도가 분명하게 이름을 짓는 것은 **정말** 중요하다. 존재 이유, 수행 기능, 사용 방법을 모두 이름을 통해 짐작할 수 있어야 한다. 이름이 다르다면 의미도 달라져야 하며 비슷한 이름은 지양해야 한다. 

규칙:

- 실제 단어를 사용하라. 임의로 만들어낸 새로운 단어나 `i`같은 알파벳은 지양하라
- 클래스 이름으로는 명사를 사용하라
- 메서드 이름으로는 동사를 사용하라

맥락이 있는 이름을 사용해서 더 빠르게 의미를 짐작할 수 있도록 한다. `state` 보다는 `addrState`가, 더 나아가서는 `addressState`가 더 좋은 이름이다.

## 함수

함수를 작게 만들수록 상위 함수의 흐름을 이해하기 쉬워진다. 함수를 작게 만들 수록 코드를 더욱 문장처럼 작성할 수 있다.

극단적으로 말하면 함수가 20줄을 넘어가지 않도록 작게 만들 수 있어야 하며, 함수의 인자는 0개가 가장 이상적이며, 4개 이상 넘어가지 않도록 만든다.

규칙:

- 작게 만들어라
- 더 작게 만들어라
- 이름으로 짐작할 수 있는 한 가지 기능만 잘 하도록 만들어라

에러 처리도 하나의 기능이므로 분리하는 것이 좋다.

## 주석

주석이 담고있는 정보와 코드가 담고있는 정보는 높은 확률로 다르기 때문에 잘못된 주석을 다는 것 보다는 주석이 없는 것이 더 좋을 수 있다. 결과적으로 주석은 **주석**일 뿐이고 코드를 대신할 수 없다.

그럼에도 불구하고 좋은 주석은 존재한다.

- 법적인 주석: Copyright, 약관 등 코드의 법적인 정보를 주석으로 추가할 수 있다.
- 정보를 제공하는 주석: 코드에서 함수나 변수의 이름으로 정보를 표현하는 것이 가장 좋은 방법이지만 주석으로 정보를 표현하는 것이 더 좋은 경우도 존재한다.

    ```swift
    // kk:mm:ss EEE, MMM dd, yyyy 형식
    Pattern timeMatcher = Pattern.compile("\\d*:\\d*:\\d* \\w* \\d*, \\d*")
    ```

- 의도를 설명하는 주석: 구현을 넘어서 코드의 의도를 설명하는 주석은 때때로 도움이 되기도 한다.
- 의미를 명료하게 하는 주석: 코드가 직접적으로 의미를 표현할 수 있는 것이 가장 이상적이지만 표준 라이브러리나 외부 코드 등 코드를 직접 수정할 수 없는 상황에서 의미를 명료하게 하는 주석은 도움이 된다.
- 결과를 경고하는 주석: 코드의 구현이 아니라 결과를 주의하는 주석을 추가하면 다른 프로그래머가 해당 코드를 사용할 때 주의해서 사용할 수 있다.
- TODO 주석: 해야할 일을 주석으로 남겨두면 해야할 일을 쉽게 정리할 수 있다.
- 중요성을 강조하는 주석: 알고리즘 코드에서 중요한 부분을 강조하는 주석을 추가할 수 있다.

    ```swift
    String listItemContent = match.group(3).trim();
    // trim은 정말 중요하다. 문자열 시작에 공백이 있으면 다른 문자열로 인식되기 때문이다.
    ```

형상관리 프로그램이 발전함에 따라 **작성자**를 명시하는 주석, 변경 이력을 기록하는 주석, 코드 자체를 주석으로 처리하는 주석 등은 더이상 필요하지 않게 되었다. 위 사항들은 형상관리 프로그램에 위임하고 코드는 깔끔하게 유지하는 것이 좋다.